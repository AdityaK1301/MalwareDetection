from tensorflow.keras.models import load_model
from keras.preprocessing.image import ImageDataGenerator
import cv2 as cv
import imutils

model = load_model("malware_classification.h5")


def predictTumor(imagePath):
    image = cv.imread(imagePath)
    # image = cv.resize(image, (128, 128))
    # n = len(imagePath)
    # print(imagePath)
    # print(imagePath[n-1])
    # while(imagePath[n-1] != "/"):
    #     n = n-1
    # n2 = n-1
    # while(imagePath[n2-1] != "/"):
    #     n2 = n2-1
    # print(imagePath[:n2-1])
    # train_df = ImageDataGenerator().flow_from_directory(directory=imagePath[:n2-1], target_size=(128,128), batch_size=10000)
    # imgs, labels = next(train_df)
    # print(imgs.shape)
    # print(labels.shape)
    # print(imgs[0])
    # print(labels[0])
    res = model.predict(image)

    return res
